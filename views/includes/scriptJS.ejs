<script src="/jquery/dist/jquery.min.js"></script>
<script src="/popper.js/dist/umd/popper.min.js"></script>
<script src="/bootstrap/dist/js/bootstrap.min.js"></script>

<script src="/bootstrap/dist/js/bootstrap.min.js"></script>

<script>
    $('#novoMorador').on('click', async function (event) {
        const nome = $('input[name="nome"]').val();
        formData = new FormData() //para pegar o arquivo
        const email = $('input[name="email"]').val();
        const cpf = $('input[name="cpf"]').val();
        const rg = $('input[name="rg"]').val();
        const foto = $('input[name="fotoMorador"]');
        formData.append('fotoMorador', foto.prop('file')[0]) //pega o arquivo do input e transforma
        let data = {
            nome: nome,
            email: email,
            cpf: cpf,
            rg: rg,
            foto: formData
        }

        let resposta = fetch(window.location.href, {
                method: "POST",
                headers: {
                    'Accept': 'application/json',
                    "Content-Type": "multipart/form-data"
                },
                body: JSON.stringify(data)
            })
            .then(function (response) {
                // return response.json()
                alert("primeiro then " + response)
            })
            .then(function (info) {
                console.log(info)
                //   alert( response.statusText)
                alert("segundo then " + info)
            }).catch(function (error) {
                console.log("terceiro then " + info)
                //  alert( response.statusText)
                alert('catch: ' + error)
            })



        if (resposta.status == 400) {
            //console.log("resposta" + response.error, resposta.error,)


            alert("DEU RUIM")

        } // console.log("aqui o resultado! " + resposta)
    })

    //  await fetch('/moradores',settings) // get ajax response
</script>